platform: template
sensors:
  livingroom_occupied:
    device_class: occupancy
    friendly_name: 'Livingroom occupied'
    entity_id:
      - media_player.android_tv
      - media_player.living_room
      - input_boolean.automatic_livingroom_occupancy
      - input_boolean.override_livingroom_occupancy
    value_template: >-
      {{ 
          (
            is_state('input_boolean.automatic_livingroom_occupancy', 'off') and is_state('input_boolean.override_livingroom_occupancy', 'on')
          )
            or
          (
            (
              not is_state('media_player.android_tv', 'unavailable')
              and
              not is_state('media_player.android_tv', 'off')
            )
            or is_state('media_player.living_room', 'playing')
          )
      }}
